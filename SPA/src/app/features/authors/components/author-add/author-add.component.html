<div class="row justify-content-center mt-5">
  <div class="col-md-4">
    <form #frm="ngForm"
          (ngSubmit)="onSubmit()">

      <div class="form-group">
        <label>Name</label>
        <input class="form-control"
               type="text"  
               [(ngModel)]="vmodel.state.author.name"
               name="name"
               required>
      </div>

      <div class="form-group">
        <label>Books</label>
        <select multiple class="form-control"
                name="booksIds"
                [(ngModel)]="vmodel.state.bookIds">
          <option *ngFor="let item of vmodel.state.allBooks; let ix=index"
                  [value]="item.id"
                  [selected]="vmodel?.state?.author?.authorBooks?.length &&
                  vmodel?.state?.selBookIds[item.id]">
                  {{item.title}}
          </option>
        </select>
      </div>

      <div class="form-group">
        <button class="btn btn-primary btn-block"
                type="submit">{{vmodel.state.author.id?'Update':'Add'}}</button>
      </div>
    </form>

    <ul class="has-error">
      <li *ngFor="let item of vmodel.errorsFlat">{{item}}</li>
    </ul>

  </div>
</div>